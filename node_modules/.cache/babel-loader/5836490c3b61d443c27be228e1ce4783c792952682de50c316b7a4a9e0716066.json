{"ast":null,"code":"import{createAction,createSlice}from\"@reduxjs/toolkit\";import Decimal from\"decimal.js\";import{toast}from'react-toastify';export const addToCart=createAction(\"cart/add\");export const deleteFromCart=createAction(\"cart/delete\");export const handleQuantity=createAction(\"cart/quantity\");export const clearCart=createAction(\"clearCart\");const cartSlice=createSlice({name:\"cart\",initialState:{cartItems:[],totalAmount:0},extraReducers:builder=>{builder.addCase(\"cart/add\",(state,action)=>{var _state$cartItems;let newItem=action.payload;let existingItem=state===null||state===void 0?void 0:(_state$cartItems=state.cartItems)===null||_state$cartItems===void 0?void 0:_state$cartItems.find(u=>u.id===newItem.id);if(existingItem){existingItem.quantity+=newItem.quantity||1;toast.success(\"Item is already in cart, item quantity increases by one :) \");}else{state.cartItems.push({...newItem,quantity:newItem.quantity||1});toast.success(\"Item added to cart!\");}state.totalAmount=new Decimal(state.totalAmount||0).plus(newItem.price*(newItem.quantity||1)).toNumber();});builder.addCase(\"cart/delete\",(state,action)=>{let deletedItem=state.cartItems.find(u=>u.id===action.payload);if(deletedItem){state.cartItems=state.cartItems.filter(u=>u.id!==action.payload);state.totalAmount=new Decimal(state.totalAmount||0).minus(deletedItem.price*(deletedItem.quantity||1)).toNumber();}});builder.addCase(\"cart/quantity\",(state,action)=>{const{itemId,newQuantity}=action.payload;let updatedItem=state.cartItems.find(u=>u.id===itemId);if(updatedItem){state.totalAmount=new Decimal(state.totalAmount||0).minus(updatedItem.price*(updatedItem.quantity||1)).plus(updatedItem.price*newQuantity).toNumber();updatedItem.quantity=newQuantity;}});builder.addCase(\"clearCart\",(state,action)=>{state.cartItems=[];state.totalAmount=0;});}});export default cartSlice.reducer;","map":{"version":3,"names":["createAction","createSlice","Decimal","toast","addToCart","deleteFromCart","handleQuantity","clearCart","cartSlice","name","initialState","cartItems","totalAmount","extraReducers","builder","addCase","state","action","_state$cartItems","newItem","payload","existingItem","find","u","id","quantity","success","push","plus","price","toNumber","deletedItem","filter","minus","itemId","newQuantity","updatedItem","reducer"],"sources":["D:/Node.js/e-comm/frontend/src/store/slices/cartSlice.jsx"],"sourcesContent":["import { createAction,createSlice } from \"@reduxjs/toolkit\";\r\nimport Decimal from \"decimal.js\";\r\nimport { toast } from 'react-toastify'\r\n\r\nexport const addToCart = createAction(\"cart/add\");\r\nexport const deleteFromCart = createAction(\"cart/delete\");\r\nexport const handleQuantity = createAction(\"cart/quantity\");\r\nexport const clearCart = createAction(\"clearCart\")\r\n\r\n\r\nconst cartSlice = createSlice({\r\n    name:\"cart\",\r\n    initialState:{\r\n        cartItems:[],\r\n        totalAmount:0\r\n    },\r\n    extraReducers:(builder)=>{\r\n        builder.addCase(\"cart/add\",(state,action)=>{\r\n            let newItem = action.payload;\r\n            let existingItem = state?.cartItems?.find((u)=> u.id === newItem.id);\r\n            if(existingItem){\r\n                existingItem.quantity += (newItem.quantity || 1)\r\n                toast.success(`Item is already in cart, item quantity increases by one :) `)\r\n            }\r\n            else{\r\n                state.cartItems.push({...newItem , quantity: (newItem.quantity || 1)});\r\n                toast.success(`Item added to cart!`)\r\n            }\r\n            state.totalAmount = new Decimal(state.totalAmount || 0)\r\n            .plus(newItem.price * (newItem.quantity || 1))\r\n            .toNumber();\r\n        })\r\n\r\n        builder.addCase(\"cart/delete\",(state,action)=>{\r\n         let deletedItem = state.cartItems.find((u)=> u.id === action.payload)\r\n         if(deletedItem){\r\n            state.cartItems = state.cartItems.filter((u)=> u.id !== action.payload);\r\n            state.totalAmount = new Decimal(state.totalAmount || 0)\r\n            .minus(deletedItem.price * (deletedItem.quantity || 1))\r\n            .toNumber();\r\n         }\r\n        })\r\n\r\n        builder.addCase(\"cart/quantity\",(state,action)=>{\r\n            const {itemId, newQuantity} = action.payload;\r\n            let updatedItem = state.cartItems.find((u)=> u.id === itemId);\r\n            if(updatedItem){\r\n                state.totalAmount = new Decimal(state.totalAmount || 0)\r\n                .minus(updatedItem.price * (updatedItem.quantity || 1))\r\n                .plus(updatedItem.price * newQuantity)\r\n                .toNumber();\r\n\r\n                updatedItem.quantity = newQuantity;\r\n            }\r\n        })\r\n\r\n        builder.addCase(\"clearCart\",(state,action)=>{\r\n            state.cartItems = [];\r\n            state.totalAmount = 0;\r\n        })\r\n    }\r\n})\r\n\r\nexport default cartSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}